#!/bin/sh 

echo "==============================================================="
echo "STEP 1. DELETE EXISTING CRD"
echo "==============================================================="
# Delete experiments.kubeflow.org
{{ bin_dir }}/kubectl delete crd experiments.kubeflow.org 
# Delete notebooks.kubeflow.tmax.io
{{ bin_dir }}/kubectl delete crd notebooks.kubeflow.tmax.io
# Delete tfjobs.kubeflow.org
{{ bin_dir }}/kubectl delete crd tfjobs.kubeflow.org  
# Delete pytorchjobs.kubeflow.org 
{{ bin_dir }}/kubectl delete crd pytorchjobs.kubeflow.org 
# Delete inferenceservices.serving.kubeflow.org 
{{ bin_dir }}/kubectl delete crd inferenceservices.serving.kubeflow.org 
# Delete trainedmodels.serving.kubeflow.org 
{{ bin_dir }}/kubectl delete crd trainedmodels.serving.kubeflow.org 

echo "==============================================================="
echo "STEP 2. CREATE CRD"
echo "==============================================================="

# Create experiments.kubeflow.org
{{ bin_dir }}/kubectl create -f ./experiment_key.yml
# Create notebooks.kubeflow.tmax.io
{{ bin_dir }}/kubectl create -f ./notebooks_key.yml
# Create tfjobs.kubeflow.org
{{ bin_dir }}/kubectl create -f ./tfjob_key.yml
# Create pytorchjobs.kubeflow.org 
{{ bin_dir }}/kubectl create -f ./pytorchjob_key.yml
# Create inferenceservices.serving.kubeflow.org
{{ bin_dir }}/kubectl create -f ./inferenceservice_key.yml
# Create trainedmodels.serving.kubeflow.org 
{{ bin_dir }}/kubectl create -f ./trainedmodel_key.yml
