---
- name: HyperRegistry | Find ingress Service's IP
  command: "{{ bin_dir }}/kubectl get services -n ingress-nginx ingress-nginx-controller -o jsonpath='{.status.loadBalancer.ingress[0].ip}'"
  changed_when: false
  register: "ingress_status"
  when: ingress_nginx_ip | length == 0

- name: HyperRegistry | Set ingress Service IP
  set_fact:
    ingress_nginx_ip: "{{ ingress_status.stdout }}"
  when: ingress_nginx_ip | length == 0
